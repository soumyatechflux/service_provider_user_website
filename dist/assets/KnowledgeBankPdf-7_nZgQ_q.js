import{p as D,r as a,n as K,A as T,f as w,h as v,j as n,B as L,k as h,a as l,T as N,C as q,D as R,F as z,G as A,H as E,J as F}from"./index-BLDXZsNf.js";import{D as G,P as I,p as j}from"./index-2sMSwH19.js";import"./index-_pDSIHrO.js";function J(){const{id:u}=D(),[f,p]=a.useState(0),[o,x]=a.useState(1),i=K(),{userData:t}=a.useContext(T),{data:r}=w({queryKey:["studentPrograms",t==null?void 0:t.id],queryFn:()=>v(t==null?void 0:t.id)}),g=a.useMemo(()=>{var e;return(((e=r==null?void 0:r.slice().filter(s=>s==null?void 0:s.knowledgeBank))==null?void 0:e.length)??0)>0},[r]);a.useEffect(()=>{g||i("/")},[g,i]);const y=async e=>{var k,m;const s=q(R,"knowledgeBankContent",e),d=await z(s);if(((k=d.data())==null?void 0:k.content)!==void 0){const S=A(),P=E(S,`KnowledgeBank/${(m=d.data())==null?void 0:m.content}`),b=await F(P),C={...d.data(),id:d.id,dataDisplayed:b};return j.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${j.version}/pdf.worker.js`,C}else return null},{data:c}=w({queryKey:["knowledgeBankSession",u],queryFn:()=>y(u??"")});function B({numPages:e}){p(e)}return n.jsxs(L,{sx:{width:"950px",mx:"auto",display:"flex",flex:1,"*":{width:"100%"},mt:5},children:[n.jsx(h,{direction:"column",alignItems:"center",children:n.jsx(l,{sx:{textTransform:"none",fontSize:16},onClick:()=>i("/knowledgebank"),children:"Back"})}),n.jsx(G,{file:c==null?void 0:c.dataDisplayed,onLoadSuccess:B,children:n.jsx(I,{width:850,pageNumber:o,renderTextLayer:!1,renderAnnotationLayer:!1})}),n.jsxs(h,{direction:"column",alignItems:"center",children:[n.jsxs(N,{noWrap:!0,sx:{width:"100%"},children:["Page ",o," of ",f]}),n.jsx(l,{sx:{textTransform:"none",fontSize:16},disabled:o===f,onClick:()=>x(e=>e+1),children:"Next"}),n.jsx(l,{sx:{textTransform:"none",fontSize:16},disabled:o===1,onClick:()=>x(e=>e-1),children:"Previous"})]})]})}export{J as default};

import{Y as M,l as H,r as f,o as T,j as e,az as G,B as b,T as v,aA as J,a as g,$ as t1,k as j,P as B,_ as e1,f as q,b1 as n1,aB as R,A as o1}from"./index-BLDXZsNf.js";import{g as r1}from"./getProgramFinalExams-5NZ9maXk.js";import{S as i1,D as s1,a as a1,b as l1}from"./TeacherProgramsPage-ptj1TZut.js";import{D as d1}from"./DialogContent-RqpdHQwN.js";import{E as c1}from"./Edit-yx9Qk3n_.js";import"./getTeacherPrograms-lj8oidpz.js";import"./getExamBankContent-38HIJiaQ.js";import"./Grid-drPrrcnl.js";import"./getKnowledgeBankContent-PVtSwhJ0.js";import"./ProgramsExplore-z56cNQZN.js";import"./stripe.esm-5XFWplrb.js";const h1="https://api-engme.techfluxsolutions.com",f1=async(n,s)=>{console.log(n);try{const i=sessionStorage.getItem("token"),o=sessionStorage.getItem("role");await M.delete(`${h1}/${o}/exams/${s._id}`,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}}),console.log(`Final exam ${s._id} deleted successfully.`)}catch(i){throw console.error("Error deleting final exam:",i),new Error("Failed to delete final exam.")}},C1="https://api-engme.techfluxsolutions.com";async function x1(n,s){try{const i=sessionStorage.getItem("token"),o=sessionStorage.getItem("role");return(await M.patch(`${C1}/${o}/exams/${n}`,{examName:s},{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}})).data}catch(i){throw console.error("Error updating exam:",i),new Error("Failed to update exam.")}}function p1({exam:n,open:s,handleClose:i}){const o=H(),[l,x]=f.useState(n.examName);f.useEffect(()=>{n&&x(n.examName)},[n]);const{mutateAsync:c,isPending:C}=T({mutationFn:()=>x1(n._id,l),onSuccess:()=>{o.invalidateQueries({queryKey:["finalExams"]}),i()}}),h=async()=>{l.trim()&&await c()};return e.jsx(G,{open:s,onClose:i,children:e.jsxs(b,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"white",p:4,borderRadius:2,boxShadow:24},children:[e.jsx(v,{variant:"h6",children:"Edit Exam"}),e.jsx(J,{fullWidth:!0,label:"Exam Name",variant:"outlined",value:l,onChange:a=>x(a.target.value),sx:{mt:2}}),e.jsxs(b,{mt:2,display:"flex",justifyContent:"flex-end",children:[e.jsx(g,{onClick:i,sx:{mr:2},variant:"outlined",children:"Cancel"}),e.jsx(g,{onClick:h,disabled:C,variant:"contained",children:C?"Updating...":"Update Exam"})]})]})})}const g1=f.forwardRef(function(s,i){return e.jsx(i1,{direction:"up",ref:i,...s})});function u1({program:n,finalExam:s,setEdited:i,selectedExam:o,setSelectedExam:l}){console.log("SET EDITED",i),console.log("FINAL EXAM CARD",s);const x=H(),[c,C]=f.useState(!1),[h,a]=f.useState(!1),{mutate:S,isPending:p}=T({onMutate:()=>{const r=x.getQueryData(["finalExams",n._id]);return x.setQueryData(["finalExams",n._id],m=>m.slice().filter(u=>u._id!==s._id)),()=>x.setQueryData(["finalExams",n._id],r)},onSuccess:()=>{x.invalidateQueries(["finalExams",n._id]),w()},mutationFn:()=>f1(n,o)}),_=()=>{C(!0)},w=()=>{C(!1)};return e.jsxs(b,{display:"flex",flexDirection:"column",m:2,position:"relative",children:[e.jsxs(t1,{open:c,TransitionComponent:g1,keepMounted:!0,onClose:w,"aria-describedby":"alert-dialog-slide-description",PaperProps:{style:{borderRadius:"20px",overflow:"hidden"}},children:[e.jsxs(s1,{sx:{mx:1,mt:2,mb:3},children:["Are you sure you want to delete ",s==null?void 0:s.examName," Model Exam?"]}),e.jsx(d1,{children:e.jsx(a1,{id:"alert-dialog-slide-description"})}),e.jsxs(l1,{sx:{display:"flex",justifyContent:"space-evenly",mx:4,mb:4},children:[e.jsx(g,{sx:{width:"120px",height:"50px",background:"#fff",color:"#000",fontFamily:"Inter",fontSize:14,textTransform:"none",fontWeight:400,border:"1px solid #000",borderRadius:"10px","&:hover":{background:"#fff",opacity:1}},onClick:w,children:"No"}),e.jsx(g,{sx:{width:"120px",height:"50px",background:"#D30000",color:"#fff",fontFamily:"Inter",fontSize:14,textTransform:"none",fontWeight:400,border:"0",borderRadius:"10px","&:hover":{background:"#D30000",opacity:1}},onClick:()=>{S(),console.log("ID",o==null?void 0:o._id),w()},children:"Yes"})]})]}),s==null?void 0:s.map(r=>(console.log("Exam Name:",s),e.jsxs(b,{mb:2,children:[e.jsxs(j,{direction:"row",alignItems:"center",justifyContent:"space-between",px:2.5,py:2,bgcolor:"#FFFBF8",position:"relative",sx:{borderTopRightRadius:"15px",borderTopLeftRadius:"15px"},children:[e.jsx(v,{fontSize:14,fontFamily:"Inter",fontWeight:500,children:r==null?void 0:r.examName}),e.jsx(v,{fontSize:14,fontFamily:"Inter",fontWeight:500,sx:{cursor:"pointer"},onClick:()=>{l(r),a(!0)},children:e.jsx(c1,{})}),o&&e.jsx(p1,{exam:o,open:h,handleClose:()=>a(!1)})]}),e.jsxs(b,{bgcolor:"#FEF4EB",px:6,sx:{borderBottomRightRadius:"15px",borderBottomLeftRadius:"15px"},children:[e.jsx(j,{direction:"column",alignItems:"center",justifyContent:"center",py:5,gap:1,children:e.jsx(B,{sx:{fontSize:46},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"48",viewBox:"0 0 49 48",fill:"none",children:e.jsx("path",{d:"M47.2266 13.7539L45.9696 12.497C44.9274 11.457 43.2401 11.457 42.1979 12.497L39.684 15.0109L35.5556 19.1393V0.888889C35.5557 0.398097 35.1579 0.000127556 34.6671 0C34.667 0 34.6673 0 34.6671 0H10.6667C10.6451 0.00171156 10.6237 0.00543424 10.6029 0.0111198C10.3906 0.0228907 10.1899 0.111516 10.0382 0.260445L0.260444 10.0382C0.105759 10.1965 0.0164337 10.4073 0.0102836 10.6286C0.0086221 10.6419 3.06701e-08 10.6527 3.06701e-08 10.6667V47.1111C-0.000127525 47.6019 0.397634 47.9999 0.888427 48C0.888272 48 0.888581 48 0.888427 48H34.6667C35.1573 48.0003 35.5553 47.6028 35.5556 47.1121C35.5556 47.1118 35.5556 47.1115 35.5556 47.1111V29.3333C35.5505 29.2948 35.5429 29.2566 35.5326 29.2192L44.7127 20.0391L47.2266 17.5252C48.2746 16.4884 48.2957 14.8104 47.2589 13.7623C47.2521 13.7554 47.2453 13.7486 47.2266 13.7539ZM42.269 19.9688L39.7544 17.4544L40.3125 16.8963L42.8272 19.4106L42.269 19.9688ZM22.7135 39.5243L22.0849 38.8956L40.3834 20.5971L41.0121 21.2257L22.7135 39.5243ZM19.3307 38.6551L21.0683 40.3928L18.4618 41.2613L19.3307 38.6551ZM20.1992 37.0095L38.4975 18.7113L39.1264 19.3402L20.8281 37.6385L20.1992 37.0095ZM9.77778 3.03472V9.77778H3.03472L9.77778 3.03472ZM33.7778 46.2222H1.77778V11.5556H10.6667C11.1576 11.5556 11.5556 11.1576 11.5556 10.6667V1.77778H33.7778V20.9171L18.3138 36.3811C18.2229 36.4742 18.1539 36.5864 18.1118 36.7095C18.1085 36.7172 18.1017 36.72 18.0989 36.7283L16.4157 41.7778H5.33333C4.84241 41.7778 4.44444 42.1757 4.44444 42.6667C4.44444 43.1576 4.84241 43.5556 5.33333 43.5556H16.8889C16.9266 43.5506 16.964 43.5431 17.0007 43.533C17.0168 43.5456 17.0361 43.5534 17.0564 43.5556C17.1521 43.5557 17.2471 43.5401 17.3377 43.5095L22.9948 41.6241C23.0037 41.6212 23.0065 41.6137 23.0147 41.6102C23.1372 41.5683 23.249 41.4998 23.342 41.4097L33.7778 30.974V46.2222ZM45.9696 16.2682L44.0842 18.1537L41.5695 15.6393L43.4548 13.7539C43.8026 13.4076 44.3649 13.4076 44.7126 13.7539L45.9695 15.0109C46.3159 15.3584 46.3159 15.9206 45.9696 16.2682ZM20.4444 16.8889H31.1111C31.6019 16.889 31.9999 16.4913 32 16.0005C32 16.0003 32 16.0006 32 16.0005V3.55556C32.0001 3.06476 31.6024 2.66679 31.1116 2.66667C31.1114 2.66667 31.1117 2.66667 31.1116 2.66667H20.4444C19.9535 2.66667 19.5556 3.06464 19.5556 3.55556V16C19.5556 16.4909 19.9535 16.8889 20.4444 16.8889ZM21.3333 4.44444H30.2222V15.1111H21.3333V4.44444ZM5.33333 20.4444H21.3333C21.8243 20.4444 22.2222 20.8424 22.2222 21.3333C22.2222 21.8243 21.8243 22.2222 21.3333 22.2222H5.33333C4.84241 22.2222 4.44444 21.8243 4.44444 21.3333C4.44444 20.8424 4.84241 20.4444 5.33333 20.4444ZM22.2222 26.6667C22.2223 27.1575 21.8246 27.5554 21.3338 27.5556C21.3336 27.5556 21.334 27.5556 21.3338 27.5556H5.33333C4.84241 27.5556 4.44444 27.1576 4.44444 26.6667C4.44444 26.1757 4.84241 25.7778 5.33333 25.7778H21.3333C21.8241 25.7776 22.2221 26.1759 22.2222 26.6667C22.2222 26.6668 22.2222 26.6665 22.2222 26.6667ZM19.5556 32C19.5557 32.4908 19.1579 32.8888 18.6671 32.8889C18.667 32.8889 18.6673 32.8889 18.6671 32.8889H5.33333C4.84241 32.8889 4.44444 32.4909 4.44444 32C4.44444 31.5091 4.84241 31.1111 5.33333 31.1111H18.6667C19.1575 31.111 19.5554 31.5092 19.5556 32C19.5556 32.0002 19.5556 31.9998 19.5556 32ZM16 37.3333C16.0001 37.8241 15.6024 38.2221 15.1116 38.2222C15.1114 38.2222 15.1117 38.2222 15.1116 38.2222H5.33333C4.84241 38.2222 4.44444 37.8243 4.44444 37.3333C4.44444 36.8424 4.84241 36.4444 5.33333 36.4444H15.1111C15.6019 36.4443 15.9999 36.8425 16 37.3333C16 37.3335 16 37.3332 16 37.3333ZM30.7552 17.9557C31.1479 18.2494 31.2281 18.8058 30.9344 19.1984C30.934 19.199 30.9336 19.1995 30.9332 19.2001L28.2665 22.7556C28.1121 22.9618 27.8758 23.0907 27.6189 23.1089C27.5972 23.1102 27.5764 23.1111 27.5556 23.1111C27.3198 23.1112 27.0937 23.0175 26.9271 22.8507L25.1493 21.0729C24.8054 20.7227 24.8104 20.16 25.1606 19.816C25.5063 19.4764 26.0605 19.4764 26.4062 19.816L27.4592 20.869L29.5113 18.1333C29.8057 17.7407 30.3627 17.6613 30.7552 17.9557ZM25.1493 42.4062C24.8054 42.056 24.8104 41.4933 25.1606 41.1493C25.5063 40.8097 26.0605 40.8097 26.4062 41.1493L27.4592 42.2023L29.5113 39.467C29.8046 39.0736 30.3613 38.9924 30.7547 39.2857C31.1481 39.579 31.2293 40.1357 30.936 40.5292C30.9351 40.5304 30.9341 40.5317 30.9331 40.533L28.2665 44.0886C28.1122 44.2948 27.8758 44.4238 27.6189 44.4419C27.5972 44.4436 27.5764 44.4444 27.5556 44.4444C27.3198 44.4445 27.0937 44.3508 26.9271 44.184L25.1493 42.4062ZM3.55556 13.3333C3.55556 12.8424 3.95352 12.4444 4.44444 12.4444H8.88889C9.37981 12.4444 9.77778 12.8424 9.77778 13.3333C9.77778 13.8243 9.37981 14.2222 8.88889 14.2222H4.44444C3.95352 14.2222 3.55556 13.8243 3.55556 13.3333ZM12.4444 13.3333C12.4444 12.8424 12.8424 12.4444 13.3333 12.4444H15.1111C15.602 12.4444 16 12.8424 16 13.3333C16 13.8243 15.602 14.2222 15.1111 14.2222H13.3333C12.8424 14.2222 12.4444 13.8243 12.4444 13.3333ZM4.44444 16.8889C3.95352 16.8889 3.55556 16.4909 3.55556 16C3.55556 15.5091 3.95352 15.1111 4.44444 15.1111H8.88889C9.37981 15.1111 9.77778 15.5091 9.77778 16C9.77778 16.4909 9.37981 16.8889 8.88889 16.8889H4.44444ZM12.4444 16C12.4444 15.5091 12.8424 15.1111 13.3333 15.1111H15.1111C15.602 15.1111 16 15.5091 16 16C16 16.4909 15.602 16.8889 15.1111 16.8889H13.3333C12.8424 16.8889 12.4444 16.4909 12.4444 16ZM12.4444 8C12.4444 7.50908 12.8424 7.11111 13.3333 7.11111H15.1111C15.602 7.11111 16 7.50908 16 8C16 8.49092 15.602 8.88889 15.1111 8.88889H13.3333C12.8424 8.88889 12.4444 8.49092 12.4444 8ZM12.4444 5.33333C12.4444 4.84241 12.8424 4.44444 13.3333 4.44444H15.1111C15.602 4.44444 16 4.84241 16 5.33333C16 5.82425 15.602 6.22222 15.1111 6.22222H13.3333C12.8424 6.22222 12.4444 5.82425 12.4444 5.33333ZM12.4444 10.6667C12.4444 10.1757 12.8424 9.77778 13.3333 9.77778H15.1111C15.602 9.77778 16 10.1757 16 10.6667C16 11.1576 15.602 11.5556 15.1111 11.5556H13.3333C12.8424 11.5556 12.4444 11.1576 12.4444 10.6667Z",fill:"black"})})})}),e.jsxs(j,{direction:"row",flex:1,gap:5,children:[e.jsxs(g,{sx:{width:"145px",height:"50px",background:"#fff",color:"#000",fontFamily:"Inter",fontSize:14,textTransform:"none",fontWeight:400,border:"0.5px solid rgba(0, 0, 0, 0.45)",borderRadius:"10px","&:hover":{background:"#fff",opacity:1},marginBottom:3},onClick:()=>{_(),l(r)},children:[p?"Deleting...":"Delete Exam"," "]}),e.jsx(g,{sx:{width:"145px",height:"50px",background:"#FF9F06",color:"#fff",fontFamily:"Inter",fontSize:14,textTransform:"none",fontWeight:400,border:"0.5px solid #FF9F06",borderRadius:"10px","&:hover":{background:"#FF9F06",opacity:1},marginBottom:3},onClick:()=>{l(r),console.log("EDIT CLICK",o==null?void 0:o._id),i(o==null?void 0:o._id)},children:"Edit Exam"})]})]})]},r==null?void 0:r._id)))]})}const y1="https://api-engme.techfluxsolutions.com",j1=sessionStorage.getItem("role"),b1=async(n,s,i,o,l)=>{const x=sessionStorage.getItem("token");try{const c=Array.isArray(s)?s:[s];if(!c.length)return alert("No questions to upload!");console.log("questionList length",c.length),console.log("questionList QUE",c);const C={examId:o==null?void 0:o._id,programId:n._id,questions:c.map(a=>({_id:a==null?void 0:a._id,question:a==null?void 0:a.question,explanation:a==null?void 0:a.explanation,questionFile:(a==null?void 0:a.questionFile)||"",duration:i??0,options:Array.isArray(a==null?void 0:a.options)?a.options:[]}))};console.log("PAYLOAD LOG",C),l==null||l(!0);const h=await M.post(`${y1}/${j1}/questions/multiple/add`,C,{headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}});console.log("Response:",h),console.log("Cleared questionList:",c)}catch(c){l==null||l(!1),console.error("Error setting final exam:",c)}finally{l==null||l(!1)}},w1=f.lazy(()=>e1(()=>import("./EditOptionQuestionFinalExam-SxWkR3_B.js"),__vite__mapDeps([0,1,2,3,4,5,6])));f.createContext();function m1({program:n,setEdited:s,finalExam:i,selectedExam:o}){console.log("SET EDITED",s),console.log("SELECTED EXAM",o);const[l,x]=f.useState(!1),c=H(),[C,h]=f.useState(-1),[a,S]=f.useState(()=>i!=null&&i.duration?parseInt(i.duration.split(" ")[0]):0),[p,_]=f.useState(""),w=async t=>{var k,L;const d=sessionStorage.getItem("token"),D=sessionStorage.getItem("role"),F="https://api-engme.techfluxsolutions.com";try{const y=await M.get(`${F}/${D}/questions/${t}`,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});return console.log("Question Response:",(k=y==null?void 0:y.data)==null?void 0:k.data),((L=y==null?void 0:y.data)==null?void 0:L.data)||[]}catch(y){return console.error("Error fetching questions:",y),[]}},{data:r=[]}=q({queryKey:["finalExamEdit",o==null?void 0:o._id,n==null?void 0:n._id],queryFn:()=>{if(!(o!=null&&o._id))throw new Error("Final Exam ID is missing");return w(o._id)},enabled:!!(o!=null&&o._id)});console.log("Final Exam Card Edit QUESTION",r),console.log("Final Exam Card Edit QUESTION",r);const m=T({mutationFn:()=>b1(n,r,a,o,x),onMutate:async()=>{const t=c.getQueryData(["finalExams",n==null?void 0:n._id]);return console.log("hello"),console.log("Question",r),c.setQueryData(["finalExams",n==null?void 0:n._id],d=>Array.isArray(d)?[...d.filter(F=>(F==null?void 0:F.id)!==(i==null?void 0:i.id)),i?{...i,questions:r}:{title:"FinalExam",questions:r}]:[]),()=>c.setQueryData(["finalExams",n==null?void 0:n._id],t)}}),A=f.useCallback(()=>{const t={question:"",options:[{option:"",is_correct:!0},{option:"",is_correct:!1},{option:"",is_correct:!1},{option:"",is_correct:!1}],type:"options"};c.setQueryData(["finalExamEdit",o==null?void 0:o._id,n==null?void 0:n._id],d=>d?[...d,t]:[t]),h(r.length)},[c,o==null?void 0:o._id,n==null?void 0:n._id,r.length]),u=f.useMemo(()=>!r||!Array.isArray(r)?[]:r.map((t,d)=>e.jsx(f.Suspense,{children:e.jsx(w1,{program:n,finalExam:o,index:d,question:t})},d)),[r,C]),I=(r==null?void 0:r.length)>0?!(r!=null&&r.find(t=>{var d,D,F,k,L,y,N,z,E,Z,$,Q,V,W,P,O,U,K,X,Y;return(t==null?void 0:t.type)==="options"?((d=t==null?void 0:t.question)==null?void 0:d.length)===0||((D=t==null?void 0:t.options[0])==null?void 0:D.length)===0||((F=t==null?void 0:t.options[1])==null?void 0:F.length)===0||((k=t==null?void 0:t.options[2])==null?void 0:k.length)===0||((L=t==null?void 0:t.options[3])==null?void 0:L.length)===0:(t==null?void 0:t.type)==="fiveOptions"?((y=t==null?void 0:t.question)==null?void 0:y.length)===0||((N=t==null?void 0:t.options[0])==null?void 0:N.length)===0||((z=t==null?void 0:t.options[1])==null?void 0:z.length)===0||((E=t==null?void 0:t.options[2])==null?void 0:E.length)===0||((Z=t==null?void 0:t.options[3])==null?void 0:Z.length)===0||(($=t==null?void 0:t.options[4])==null?void 0:$.length)===0:((Q=t==null?void 0:t.question)==null?void 0:Q.length)===0||((V=t==null?void 0:t.firstCorrect)==null?void 0:V.length)===0||((W=t==null?void 0:t.secondCorrect)==null?void 0:W.length)===0||((P=t==null?void 0:t.thirdCorrect)==null?void 0:P.length)===0||((O=t==null?void 0:t.fourthCorrect)==null?void 0:O.length)===0||((U=t==null?void 0:t.firstLabel)==null?void 0:U.length)===0||((K=t==null?void 0:t.secondLabel)==null?void 0:K.length)===0||((X=t==null?void 0:t.thirdLabel)==null?void 0:X.length)===0||((Y=t==null?void 0:t.fourthLabel)==null?void 0:Y.length)===0})):!0;return l?e.jsx(n1,{}):e.jsxs(b,{display:"flex",flexDirection:"column",bgcolor:"#fff",py:2,flex:1,children:[p&&e.jsx(R,{severity:"error",children:p}),(u==null?void 0:u.length)>0&&u[C],e.jsxs("div",{className:"flex flex-row items-center justify-center gap-4 ml-auto",children:[e.jsx("p",{className:"font-[Inter] font-semibold text-base",children:"Duration: "}),e.jsx("input",{value:r==null?void 0:r.duration,onChange:t=>S(parseInt(t.target.value)),placeholder:"Duration in Minutes",type:"number",className:"w-24 px-2 py-3 shadow-[0px_0px_0px_1px_rgba(0,0,0,0.1)] rounded-sm font-[Inter]"})]}),e.jsxs(j,{flex:1,direction:"column",justifyContent:"space-between",children:[(u==null?void 0:u.length)>0&&e.jsxs(j,{direction:"row",gap:12,ml:"auto",mr:"auto",mt:4,children:[e.jsx(g,{onClick:()=>h(t=>t-1),disabled:C===0,sx:{width:"120px",height:"40px",background:"#9D9D9D",color:"#fff",fontFamily:"Inter",fontSize:14,textTransform:"none",fontWeight:500,border:"0px",borderRadius:"15px","&:hover":{background:"#9D9D9D",opacity:1}},children:"Previous"}),e.jsx(g,{onClick:()=>h(t=>t+1),disabled:C===u.length-1,sx:{width:"120px",height:"40px",background:"#9D9D9D",color:"#fff",fontFamily:"Inter",fontSize:14,textTransform:"none",fontWeight:500,border:"0px",borderRadius:"15px","&:hover":{background:"#9D9D9D",opacity:1}},children:"Next"})]}),e.jsxs(g,{sx:{background:"linear-gradient(95deg, #226E9F 5.94%, #6A9DBC 95.69%)",color:"#fff",fontFamily:"Inter",fontSize:18,textTransform:"none",fontWeight:500,borderRadius:"8px","&:hover":{background:"linear-gradient(95deg, #226E9F 5.94%, #6A9DBC 95.69%)",opacity:1},paddingY:1.95,paddingX:1.5,display:"flex",alignItems:"center",justifyContent:"space-between",width:"160px",alignSelf:"flex-end"},onClick:A,children:[e.jsx(B,{sx:{fontSize:20,fontWeight:400},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",children:e.jsx("path",{d:"M9.5 0V19M0 9.5H19",stroke:"white",strokeWidth:"2"})})}),e.jsx(v,{noWrap:!0,fontFamily:"Inter",fontSize:14,children:"Add Question"})]})]}),e.jsxs(j,{flex:1,justifyContent:"flex-end",direction:"row",mt:3,pb:6,alignItems:"center",children:[e.jsx(j,{gap:1.5,flex:1,minHeight:"75px"}),e.jsxs(j,{direction:"row",gap:3,mt:"auto",children:[e.jsx(g,{sx:{width:"120px",height:"35px",background:"#fff",color:"#226E9F",fontFamily:"Inter",fontSize:14,textTransform:"none",fontWeight:500,border:"1px solid #226E9F",borderRadius:"8px","&:hover":{background:"#fff",opacity:1}},onClick:()=>{s("")},children:"Cancel"}),e.jsx(g,{sx:{width:"120px",height:"35px",background:"#6A9DBC",color:"#fff",fontFamily:"Inter",fontSize:14,textTransform:"none",fontWeight:500,border:"1px solid #6A9DBC",borderRadius:"8px","&:hover":{background:"#6A9DBC",opacity:1}},onClick:()=>{I?(s(""),m.mutate()):_("Please Enter All Details!")},disabled:m.isPending,children:m.isPending?"confirming...":"Confirm"})]})]})]})}const F1=f.memo(m1),S1=F1,_1="https://api-engme.techfluxsolutions.com";function D1({program:n,open:s,handleClose:i}){const o=H(),[l,x]=f.useState(""),[c,C]=f.useState(""),[h,a]=f.useState("");async function S(r){var m,A,u;try{const I=sessionStorage.getItem("token"),t=sessionStorage.getItem("role"),d=await M.post(`${_1}/${t}/exams/add`,{programId:r.programId,examName:r.examName},{headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"}});return(d==null?void 0:d.status)===200&&((m=d==null?void 0:d.data)!=null&&m.success)?(C(""),a((A=d==null?void 0:d.data)==null?void 0:A.message),setTimeout(()=>{a(""),i()},2e3)):(a(""),C((u=d==null?void 0:d.data)==null?void 0:u.message),setTimeout(()=>{C("")},2e3)),d.data}catch(I){throw console.error("Error adding exam:",I),new Error("Failed to add exam.")}}const{mutateAsync:p,isPending:_}=T({mutationFn:S,onSuccess:()=>{o.invalidateQueries({queryKey:["finalExams",n._id]})}}),w=async()=>{l.trim()&&await p({programId:String(n._id),examName:l})};return e.jsx(e.Fragment,{children:e.jsx(G,{open:s,onClose:i,children:e.jsxs(b,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"white",p:4,borderRadius:2,boxShadow:24},children:[e.jsx(v,{variant:"h6",children:"Add a New Exam"}),e.jsx(J,{fullWidth:!0,label:"Exam Name",variant:"outlined",onChange:r=>x(r.target.value),sx:{mt:2}}),e.jsxs(b,{my:2,display:"flex",justifyContent:"flex-end",children:[e.jsx(g,{onClick:i,sx:{mr:2},variant:"outlined",children:"Cancel"}),e.jsx(g,{onClick:w,disabled:_,variant:"contained",children:_?"Adding...":"Add Exam"})]}),c&&!h&&e.jsx(R,{severity:"error",children:c}),h&&!c&&e.jsx(R,{severity:"success",children:h})]})})})}function z1(n){const[s,i]=f.useState(!1),{userData:o}=f.useContext(o1),[l,x]=f.useState(""),[c,C]=f.useState(null),{data:h,isLoading:a}=q({queryKey:["finalExams",n==null?void 0:n._id],queryFn:()=>{if(!(n!=null&&n._id))throw new Error("Program ID is undefined");return r1(String(n==null?void 0:n._id))}});console.log("PROGRAM ID FINAL EXAM",n==null?void 0:n._id,o==null?void 0:o._id),console.log("Final Exam",h);const S=()=>!h||h.length===0?e.jsx("p",{children:"No exams available."}):e.jsx(u1,{setEdited:x,program:n,finalExam:h,selectedExam:c,setSelectedExam:C});return a?e.jsx(e.Fragment,{}):e.jsxs(b,{gap:1.5,display:"flex",flexDirection:"column",flex:1,alignSelf:"stretch",width:"auto",children:[e.jsx(j,{flex:1,alignItems:"flex-end",justifyContent:"center",width:"100%",children:e.jsxs(g,{sx:{flex:1,background:"linear-gradient(95deg, #226E9F 5.94%, #6A9DBC 95.69%)",color:"#fff",fontFamily:"Inter",fontSize:18,textTransform:"none",fontWeight:500,border:"1px solid linear-gradient(95deg, #226E9F 5.94%, #6A9DBC 95.69%)",borderRadius:"20px","&:hover":{background:"linear-gradient(95deg, #226E9F 5.94%, #6A9DBC 95.69%)",opacity:1},paddingY:1.95,paddingX:2,display:"flex",alignItems:"center",justifyContent:"space-between",gap:2},children:[e.jsx(B,{sx:{fontSize:20,fontWeight:400},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.17479 0H10.8252C11.4319 0 11.9109 0.478992 11.9109 1.05378V7.12101H17.9462C18.521 7.12101 19 7.6 19 8.17479V10.8252C19 11.4319 18.521 11.9109 17.9462 11.9109H11.9109V17.9462C11.9109 18.521 11.4319 19 10.8252 19H8.17479C7.6 19 7.12101 18.521 7.12101 17.9462V11.9109H1.05378C0.478992 11.9109 0 11.4319 0 10.8252V8.17479C0 7.6 0.478992 7.12101 1.05378 7.12101H7.12101V1.05378C7.12101 0.478992 7.6 0 8.17479 0Z",fill:"white"})})}),e.jsx(v,{onClick:()=>i(!0),fontFamily:"Inter",fontSize:14,sx:{cursor:"pointer",color:"#"},children:"Add New Exam"}),e.jsx(D1,{program:n,open:s,handleClose:()=>i(!1)})]})}),e.jsx(j,{direction:"row",alignItems:"center",justifyContent:"center",gap:2,children:S()}),l!==""&&(h!=null&&h.find(p=>(p==null?void 0:p._id)===l))?e.jsx(S1,{program:n,setEdited:x,selectedExam:c,finalExam:h==null?void 0:h.find(p=>(p==null?void 0:p._id)===l)}):e.jsx(e.Fragment,{})]})}export{z1 as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/EditOptionQuestionFinalExam-SxWkR3_B.js","assets/index-BLDXZsNf.js","assets/index-sAHsY2w0.css","assets/HighlightOff-sN9To1V8.js","assets/index-_pDSIHrO.js","assets/Switch-HgNd9vgt.js","assets/SwitchBase-oJwiIVyh.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
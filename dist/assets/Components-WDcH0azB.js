import{l as E,r as n,o as F,j as e,az as _,B as p,T as A,aA as k,a as j,aB as b,Y as B,_ as R,f as T,$ as z,aa as D,k as N,P}from"./index-BLDXZsNf.js";import{g as V}from"./getCoursesData-bKJQ8hIk.js";const H="https://api-engme.techfluxsolutions.com";function M({program:s,open:l,handleClose:i}){const x=E(),[c,h]=n.useState(""),[o,a]=n.useState(""),[r,d]=n.useState("");async function g(f){var S,w,v;try{const y=sessionStorage.getItem("token"),I=sessionStorage.getItem("role"),t=await B.post(`${H}/${I}/course/add`,{programId:f.programId,courseName:f.courseName},{headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}});return(t==null?void 0:t.status)===200&&((S=t==null?void 0:t.data)!=null&&S.success)?(a(""),d((w=t==null?void 0:t.data)==null?void 0:w.message),setTimeout(()=>{d("")},2e3)):(d(""),a((v=t==null?void 0:t.data)==null?void 0:v.message),setTimeout(()=>{a("")},2e3)),t.data}catch(y){throw console.error("Error adding course:",y),new Error("Failed to add course.")}}const{mutateAsync:C,isPending:u}=F({mutationFn:g,onSuccess:()=>{x.invalidateQueries({queryKey:["courses",s._id]}),i()}}),m=async()=>{c.trim()&&await C({programId:String(s._id),courseName:c})};return e.jsx(e.Fragment,{children:e.jsx(_,{open:l,onClose:i,children:e.jsxs(p,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"white",p:4,borderRadius:2,boxShadow:24},children:[e.jsx(A,{variant:"h6",children:"Add a New Course"}),e.jsx(k,{fullWidth:!0,label:"Course Name",variant:"outlined",onChange:f=>h(f.target.value),sx:{mt:2}}),e.jsxs(p,{mt:2,display:"flex",justifyContent:"flex-end",children:[e.jsx(j,{onClick:i,sx:{mr:2},variant:"outlined",children:"Cancel"}),e.jsx(j,{onClick:m,disabled:u,variant:"contained",children:u?"Adding...":"Add Course"}),o&&!r&&e.jsx(b,{severity:"error",children:o}),r&&!o&&e.jsx(b,{severity:"success",children:r})]})]})})})}const O=n.lazy(()=>R(()=>import("./ComponentCard-j759-oAJ.js"),__vite__mapDeps([0,1,2,3,4,5])));function q(s){const[l,i]=n.useState(!1),[x,c]=n.useState(1/0),[h,o]=n.useState(!1),{data:a,isLoading:r}=T({queryKey:["courses",s==null?void 0:s._id],queryFn:()=>V(s),refetchOnMount:!1,enabled:!!(s!=null&&s._id),refetchInterval:x,refetchOnWindowFocus:!1});n.useEffect(()=>{c(1/0),i(!1)},[a]);const d=!r&&(a==null?void 0:a.map((C,u)=>e.jsx(n.Suspense,{children:e.jsx(O,{index:u,course:C,courses:a.map(m=>m.id)})})));async function g(){console.log("COURSESSSS"),o(!0)}return e.jsxs(p,{gap:1.5,display:"flex",flexDirection:"column",flex:1,alignItems:"center",justifyContent:"center",alignSelf:"stretch",width:"auto",children:[e.jsx(z,{open:l,PaperProps:{style:{background:"transparent",backgroundColor:"transparent",overflow:"hidden",boxShadow:"none"}},children:e.jsx(D,{size:"46px",sx:{color:"#FF7E00"}})}),e.jsx(N,{flex:1,alignItems:"flex-end",justifyContent:"center",my:2,width:"100%",children:e.jsxs(j,{sx:{flex:1,background:"linear-gradient(95deg, #226E9F 5.94%, #6A9DBC 95.69%)",color:"#fff",fontFamily:"Inter",fontSize:18,textTransform:"none",fontWeight:500,border:"1px solid linear-gradient(95deg, #226E9F 5.94%, #6A9DBC 95.69%)",borderRadius:"20px","&:hover":{background:"linear-gradient(95deg, #226E9F 5.94%, #6A9DBC 95.69%)",opacity:1},paddingY:1.95,paddingX:2,display:"flex",alignItems:"center",justifyContent:"space-between",gap:2},disabled:l,children:[e.jsx(P,{sx:{fontSize:20,fontWeight:400},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.17479 0H10.8252C11.4319 0 11.9109 0.478992 11.9109 1.05378V7.12101H17.9462C18.521 7.12101 19 7.6 19 8.17479V10.8252C19 11.4319 18.521 11.9109 17.9462 11.9109H11.9109V17.9462C11.9109 18.521 11.4319 19 10.8252 19H8.17479C7.6 19 7.12101 18.521 7.12101 17.9462V11.9109H1.05378C0.478992 11.9109 0 11.4319 0 10.8252V8.17479C0 7.6 0.478992 7.12101 1.05378 7.12101H7.12101V1.05378C7.12101 0.478992 7.6 0 8.17479 0Z",fill:"white"})})}),e.jsx(A,{onClick:g,fontFamily:"Inter",fontSize:14,children:"Add a New Course"}),e.jsx(M,{program:s,open:h,handleClose:()=>o(!1)})]})}),d]})}const $=n.memo(q);export{$ as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ComponentCard-j759-oAJ.js","assets/index-BLDXZsNf.js","assets/index-sAHsY2w0.css","assets/getQuizzesData-LrFtBJND.js","assets/AccordionSummary-zqxAlL-z.js","assets/Edit-yx9Qk3n_.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
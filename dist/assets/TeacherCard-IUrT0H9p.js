import{r as n,A as z,f as T,j as e,k as x,T as d,P as R,_ as w,I as b,aa as _,Y as W,B as P}from"./index-BLDXZsNf.js";import{g as B}from"./getStudentInTeacherPrograms-XjgIpNim.js";import{g as A}from"./getTeacherFollowers-Nqn5rw-j.js";import"./getStudentCount-DmUkYYEn.js";function U({setEdit:o,image:l,title:r,name:c,university:f}){var p;const{userData:t}=n.useContext(z),{data:m}=T({queryKey:["teacherStudentsPrograms",t==null?void 0:t.id],queryFn:()=>B(t==null?void 0:t.programs),enabled:!!(t!=null&&t.id)}),{data:a}=T({queryKey:["teacherFollowers",t==null?void 0:t.id],queryFn:()=>A(t==null?void 0:t.id),enabled:!!(t!=null&&t.id)});return e.jsxs(e.Fragment,{children:[e.jsxs(x,{direction:"row",alignItems:"center",gap:{xs:3,sm:3,lg:8},children:[e.jsx("img",{style:{borderRadius:"211px",border:"5px solid #FFF",background:"lightgray -30.877px 0px / 185.106% 100% no-repeat",objectFit:"cover",marginBottom:"-100px",marginLeft:"-50px",minWidth:"250px",minHeight:"250px"},src:l,width:"250px",height:"250px",alt:"profile"}),e.jsxs(x,{direction:"column",gap:1,mr:4,ml:-3,children:[e.jsxs(x,{direction:"row",gap:{xs:1,sm:1,lg:2.5},children:[e.jsx(d,{fontWeight:600,fontSize:16,sx:{color:"#000"},noWrap:!0,children:c}),e.jsx(R,{onClick:()=>o(!0),sx:{fontSize:20,marginLeft:1,marginTop:-1,cursor:"pointer"},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[e.jsx("path",{d:"M19.1835 8.23797C18.7321 8.23797 18.366 8.604 18.366 9.0554V16.5213C18.366 17.5377 17.5395 18.3651 16.5223 18.3651H3.47956C2.46231 18.3651 1.63579 17.5377 1.63579 16.5213V3.47866C1.63579 2.46231 2.46231 1.63488 3.47956 1.63488H11.0354C11.4868 1.63488 11.8529 1.26885 11.8529 0.817439C11.8529 0.366031 11.4868 0 11.0354 0H3.47956C1.56131 0 0 1.5604 0 3.47866V16.5213C0 18.4396 1.56131 20 3.47956 20H16.5223C18.4405 20 20.0018 18.4396 20.0018 16.5213V9.0554C20.0018 8.604 19.6349 8.23797 19.1835 8.23797Z",fill:"#226E9F"}),e.jsx("path",{d:"M14.4441 0.821587L7.17161 8.09407C6.61938 8.64538 6.35145 9.42831 6.44681 10.2021L6.42774 12.7489C6.42683 12.9678 6.51312 13.1785 6.66752 13.3329C6.82102 13.4864 7.02901 13.5727 7.24609 13.5727C7.2479 13.5727 7.25063 13.5727 7.25245 13.5727L9.79922 13.5536C10.5694 13.649 11.3551 13.382 11.9064 12.8298L19.1798 5.55728C19.633 5.10406 19.8864 4.50369 19.8937 3.867C19.9019 3.22395 19.6566 2.61995 19.2052 2.16945L17.8319 0.797064C16.9037 -0.131183 15.3841 -0.118468 14.4441 0.821587ZM18.2579 3.84702C18.2561 4.0541 18.1716 4.25029 18.0217 4.40015L10.7484 11.6726C10.5458 11.8743 10.2615 11.9724 9.97361 11.9269C9.93183 11.9206 9.89096 11.9179 9.84918 11.9179C9.84736 11.9179 9.84463 11.9179 9.84282 11.9179L8.06807 11.9315L8.08169 10.1558C8.08169 10.1122 8.07806 10.0695 8.0717 10.0259C8.0281 9.74257 8.12347 9.45192 8.32601 9.25029L15.5985 1.97781C15.9037 1.67536 16.3851 1.66264 16.6757 1.95147L18.049 3.32386C18.1861 3.46191 18.2606 3.6472 18.2579 3.84702Z",fill:"#226E9F"})]})})]}),e.jsxs(d,{fontSize:14,fontWeight:400,children:[r," | ",f]})]})]}),e.jsxs(x,{direction:"row",gap:{xs:2,sm:4,lg:8},mr:{xs:2,sm:4,lg:8},flexWrap:"wrap",children:[e.jsxs(x,{direction:"column",bgcolor:"#fff",gap:.2,alignItems:"center",borderRadius:"10px",py:.1,px:.5,children:[e.jsx(d,{fontFamily:"Inter",fontSize:22,fontWeight:700,children:(p=t==null?void 0:t.programs)==null?void 0:p.length}),e.jsx(d,{fontSize:14,fontFamily:"Inter",fontWeight:400,children:"Program(s)"})]}),e.jsxs(x,{direction:"column",bgcolor:"#fff",gap:.2,alignItems:"center",borderRadius:"10px",py:.1,px:.5,children:[e.jsx(d,{fontFamily:"Inter",fontSize:22,fontWeight:700,children:m}),e.jsx(d,{fontSize:14,fontFamily:"Inter",fontWeight:400,children:"Student(s)"})]}),e.jsxs(x,{direction:"column",bgcolor:"#fff",gap:.2,alignItems:"center",borderRadius:"10px",py:.1,px:5,children:[e.jsx(d,{fontFamily:"Inter",fontSize:22,fontWeight:700,children:a==null?void 0:a.length}),e.jsx(d,{fontSize:14,fontFamily:"Inter",fontWeight:400,children:"Followers"})]})]})]})}const $=n.memo(U),V=$,j=n.lazy(()=>w(()=>import("./index-xGSJb36z.js"),__vite__mapDeps([0,1,2]))),I=n.lazy(()=>w(()=>import("./index-qvIeSywA.js"),__vite__mapDeps([3,1,2]))),F=n.lazy(()=>w(()=>import("./index-1ivrf26M.js"),__vite__mapDeps([4,1,2])));function H({title:o,name:l,image:r,university:c,setTitle:f,setName:t,setImage:m,setUniversity:a,setEdit:p}){const[h,u]=n.useState(!1);console.log("name",l);const k=i=>{if(!["image/jpeg","image/png","image/jpg"].includes(i.type)){alert("Invalid image format. Please upload a JPG or PNG file.");return}m(i)},L=async()=>{var E,S;const i="https://api-engme.techfluxsolutions.com",C=sessionStorage.getItem("token");if(!C)throw new Error("Unauthorized: No token found.");try{const s=new FormData;s.append("name",l),s.append("title",o),s.append("university",c),r&&r instanceof File&&s.append("image",r);const v=sessionStorage.getItem("role");let y="";v==="teacher"&&(y=`${i}/teacher/auth/profile`),v==="admin"&&(y=`${i}/admin/auth/profile`),u(!0);const g=await W.patch(`${y}`,s,{headers:{Authorization:`Bearer ${C}`,"Content-Type":"multipart/form-data"}});return console.log("EDIT ADMIN PROFILe",g==null?void 0:g.data),console.log("EDIT ADMIN PROFILe",(S=(E=g==null?void 0:g.data)==null?void 0:E.data)==null?void 0:S.name),p(!1),g.data}catch(s){throw u(!1),console.error("Error updating teacher data:",s),s}finally{u(!1)}};return e.jsx(n.Suspense,{children:e.jsxs(I,{width:"100%",height:"100%",display:"flex",alignItems:"center",gap:4,children:[e.jsxs(I,{position:"relative",width:"250px",minWidth:"250px",height:"250px",borderRadius:"50%",overflow:"hidden",mx:2,border:"4px solid rgba(0, 0, 0, 0.80)",display:"flex",alignItems:"center",justifyContent:"center",sx:{backgroundImage:`url(${r})`,backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:[e.jsx(I,{position:"absolute",bgcolor:"#000",width:"100%",height:"100%",sx:{opacity:.5}}),e.jsxs(F,{component:"label",sx:{zIndex:3,position:"relative",background:"#FEF4EB",color:"#000",border:"1px solid #000",fontSize:14,fontWeight:500,fontFamily:"Inter",paddingX:2.5,paddingY:1,"&:hover":{background:"#FEF4EB",opacity:1}},children:["Edit Photo",e.jsx("input",{hidden:!0,accept:"image/*",width:"100%",height:"100%",type:"file",onChange:i=>{k(i.target.files[0])}})]})]}),e.jsxs(j,{direction:"column",gap:8,alignItems:"center",children:[e.jsxs(j,{direction:"row",gap:4,alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",mr:4,children:[e.jsx(b,{value:l,color:"primary",disableUnderline:!0,sx:{border:"1px solid #226E9F",width:"280px",background:"#fff",borderRadius:"5px",paddingX:1,paddingY:.5},placeholder:"Name",onChange:i=>{t(i.target.value)}}),e.jsx(b,{value:o,color:"primary",disableUnderline:!0,sx:{border:"1px solid #226E9F",width:"280px",background:"#fff",borderRadius:"5px",paddingX:1,paddingY:.5},placeholder:"Title",onChange:i=>f(i.target.value)}),e.jsx(b,{value:c,color:"primary",disableUnderline:!0,sx:{border:"1px solid #226E9F",width:"280px",background:"#fff",borderRadius:"5px",paddingX:1,paddingY:.5},placeholder:"University",onChange:i=>a(i.target.value)})]}),e.jsxs(j,{direction:"row",gap:3.5,alignItems:"center",justifyContent:"space-evenly",children:[e.jsx(F,{sx:{width:"180px",height:"45px",background:"#fff",color:"#000",fontFamily:"Inter",fontSize:14,textTransform:"none",fontWeight:600,border:"2px solid #226E9F","&:hover":{background:"#fff",opacity:1}},onClick:()=>p(!1),children:"Cancel"}),e.jsx(F,{sx:{width:"180px",height:"45px",background:"#D0EBFC",color:"#000",fontFamily:"Inter",fontSize:14,textTransform:"none",fontWeight:600,border:"2px solid #226E9F","&:hover":{background:"#D0EBFC",opacity:1}},onClick:()=>{L()},children:h?e.jsx(_,{size:24,color:"inherit"}):" Confirm"})]})]})]})})}const N=n.memo(H),O=N;function Z(){const{userData:o}=n.useContext(z);console.log("USER CARD",o);const[l,r]=n.useState(!1),[c,f]=n.useState(o==null?void 0:o.name),[t,m]=n.useState((o==null?void 0:o.title)||""),[a,p]=n.useState((o==null?void 0:o.university)||""),[h,u]=n.useState((o==null?void 0:o.image)||"");return e.jsx(P,{mx:14,display:"flex",flexDirection:"row",alignItems:"center",bgcolor:"#FEF4EB",boxShadow:"0px 4px 4px 0px rgba(0, 0, 0, 0.25)",borderRadius:"0px 0px 20px 20px",width:"auto",py:4,zIndex:0,position:"relative",justifyContent:"space-between",minHeight:"200px",children:l?e.jsx(O,{university:a,setUniversity:p,name:c,setName:f,title:t,image:h,setImage:u,setTitle:m,setEdit:r}):e.jsx(V,{university:a,name:c,title:t,image:h instanceof File?URL.createObjectURL(h):h,setEdit:r})})}export{Z as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-xGSJb36z.js","assets/index-BLDXZsNf.js","assets/index-sAHsY2w0.css","assets/index-qvIeSywA.js","assets/index-1ivrf26M.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
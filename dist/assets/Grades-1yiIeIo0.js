import{f as Q,j as e,k as x,T as b,r as p,_ as A,U as V,D as $,C as E,F as J,A as Z,aa as q,B as L,S as ee,a5 as ne,M as R}from"./index-BLDXZsNf.js";import{A as _,a as D,b as B}from"./AccordionSummary-zqxAlL-z.js";import{b as te,g as oe}from"./getQuizzesData-LrFtBJND.js";import{b as se,a as ie}from"./getStudentLessons-9oxf_aXv.js";import{Q as M,a as v}from"./QuestionDropDowns-YNAQPNKT.js";import"./index-_pDSIHrO.js";const re=p.lazy(()=>A(()=>import("./ExpandMore-uAOPnDwe.js").then(n=>n.E),__vite__mapDeps([0,1,2])));function de({quizzesArray:n,index:t,questions:i,setQuestions:h,setSelectedQuiz:l}){console.log(n);const{data:j,isLoading:g}=Q({queryKey:["quizzesStudentCards",t],queryFn:async()=>n?await Promise.all(n==null?void 0:n.map(async a=>{const C=V($,"quizzes"),y=E(C,a.quizId),d=await J(y);return{...d.data(),id:d.id}})):[],enabled:!!n});if(g)return e.jsx(e.Fragment,{});const I=n==null?void 0:n.map((a,C)=>{var y,d;return e.jsxs(x,{direction:"row",justifyContent:"space-between",flex:1,height:"50px",sx:{borderBottom:"1px solid rgba(0, 0, 0, 0.1)",paddingY:0},alignItems:"center",bgcolor:"rgba(0, 0, 0, 0.05)",children:[e.jsx(x,{bgcolor:"#D0EBFC",height:"100%",textAlign:"center",alignItems:"center",justifyContent:"center",pr:4,flex:1,children:e.jsx(b,{fontFamily:"Inter",fontSize:16,fontWeight:500,children:C===0?"First Take":"Retake"})}),e.jsxs(x,{bgcolor:"rgba(255, 255, 255, 0.80)",height:"100%",textAlign:"center",alignItems:"center",direction:"row",justifyContent:"space-between",flex:1,px:2,gap:4,sx:{borderRight:"1px solid rgba(0, 0, 0, 0.1)"},children:[e.jsxs(b,{fontFamily:"Inter",fontSize:16,fontWeight:500,children:[a==null?void 0:a.grade,"/",(d=(y=j==null?void 0:j.find(S=>(S==null?void 0:S.id)===a.quizId))==null?void 0:y.questions)==null?void 0:d.length]}),e.jsx("button",{onClick:()=>{i?(l(""),h("")):(h(a.id),l(a.quizId))},className:"px-2 w-fit py-1.5 rounded-lg h-fit font-semibold max-h-8 text-xs outline-none text-black font-[Inter] bg-[#226E9F]",children:i===a.id?"Hide Report":"Show Report"})]})]})});return e.jsx(p.Suspense,{children:e.jsxs(_,{sx:{".css-o4b71y-MuiAccordionSummary-content":{margin:0,boxShadow:"none"},boxShadow:"none",".css-1g92jzo-MuiPaper-root-MuiAccordion-root":{boxShadow:"none"}},children:[e.jsx(D,{expandIcon:e.jsx(re,{sx:{paddingRight:2,paddingLeft:6,color:"#fff"}}),sx:{padding:0,margin:"0 !important",boxShadow:"none",background:"#226E9F"},children:e.jsxs(x,{justifyContent:"space-between",bgcolor:"#226E9F",direction:"row",flex:1,height:"100%",pl:10,minWidth:"300px",children:[e.jsx(x,{justifyContent:"space-between",direction:"row",gap:8,children:e.jsxs(b,{sx:{color:"#fff"},fontFamily:"Inter",fontSize:16,fontWeight:500,children:["Quiz ",t+1]})}),e.jsx(b,{sx:{color:"#fff"},fontFamily:"Inter",fontSize:16,fontWeight:500,children:"Grade"})]})}),e.jsx(B,{sx:{background:"#F8F8F8",paddingY:0,paddingX:0},children:I})]})})}const ae=p.lazy(()=>A(()=>import("./ExpandMore-uAOPnDwe.js").then(n=>n.E),__vite__mapDeps([0,1,2])));function ce({assessmentsArray:n,index:t,questions:i,setQuestions:h,setSelectedAssessment:l}){const j=n==null?void 0:n.map((g,I)=>e.jsxs(x,{direction:"row",justifyContent:"space-between",flex:1,height:"50px",sx:{borderBottom:"1px solid rgba(0, 0, 0, 0.1)",paddingY:0},alignItems:"center",bgcolor:"rgba(0, 0, 0, 0.05)",children:[e.jsx(x,{bgcolor:"#FEF4EB",height:"100%",textAlign:"center",alignItems:"center",justifyContent:"center",pr:4,flex:1,children:e.jsx(b,{fontFamily:"Inter",fontSize:16,fontWeight:500,children:I===0?"First Take":"Retake"})}),e.jsxs(x,{bgcolor:"rgba(255, 255, 255, 0.80)",height:"100%",textAlign:"center",alignItems:"center",direction:"row",justifyContent:"space-between",flex:1,px:1.5,gap:1,sx:{borderRight:"1px solid rgba(0, 0, 0, 0.1)"},maxWidth:"55%",minWidth:"55%",children:[e.jsxs(b,{fontFamily:"Inter",fontSize:16,fontWeight:500,children:[g==null?void 0:g.grade,"%"]}),e.jsx("button",{onClick:()=>{i?(l(""),h("")):(h(g.id),l(g.assessmentId))},className:"px-2 ml-auto text-nowrap w-fit py-1.5 rounded-lg h-fit font-semibold max-h-8 text-xs outline-none text-black font-[Inter] bg-[#226E9F]",children:i===g.id?"Hide Report":"Show Report"})]})]}));return e.jsx(p.Suspense,{children:e.jsxs(_,{sx:{".css-o4b71y-MuiAccordionSummary-content":{margin:0,boxShadow:"none"},boxShadow:"none",".css-1g92jzo-MuiPaper-root-MuiAccordion-root":{boxShadow:"none"}},children:[e.jsx(D,{expandIcon:e.jsx(ae,{sx:{paddingRight:2,paddingLeft:6,color:"#fff"}}),sx:{padding:0,margin:"0 !important",boxShadow:"none",background:"#FF9F06"},children:e.jsxs(x,{justifyContent:"space-between",bgcolor:"#FF9F06",direction:"row",flex:1,height:"100%",pl:10,minWidth:"300px",children:[e.jsx(x,{justifyContent:"space-between",direction:"row",gap:8,children:e.jsxs(b,{sx:{color:"#fff"},fontFamily:"Inter",fontSize:16,fontWeight:500,children:["Assessment ",t+1]})}),e.jsx(b,{sx:{color:"#fff"},fontFamily:"Inter",fontSize:16,fontWeight:500,children:"Grade"})]})}),e.jsx(B,{sx:{background:"#F8F8F8",paddingY:0,paddingX:0},children:j})]})})}function ue(n){const{userData:t}=p.useContext(Z),[i,h]=p.useState(""),[l,j]=p.useState("All Questions"),[g,I]=p.useState(""),[a,C]=p.useState(""),y=p.useRef(null),{data:d,isLoading:S}=Q({queryKey:["quizzes",n.id,"currentCard",t.id],queryFn:()=>te(n.courses),enabled:!!n.courses,refetchOnMount:!0}),{data:f,isLoading:z}=Q({queryKey:["assessments",n.id,"currentCard",t.id],queryFn:()=>oe(n.courses),enabled:!!n.courses,refetchOnMount:!0}),{data:m,isLoading:O}=Q({queryKey:["studentQuizzes",t==null?void 0:t.id,"currentCard",n.id],queryFn:()=>se(t==null?void 0:t.id,d==null?void 0:d.map(r=>r.id)),enabled:!!d}),{data:F,isLoading:P}=Q({queryKey:["studentAssessment",t==null?void 0:t.id,"currentCard",n.id],queryFn:()=>ie(t==null?void 0:t.id,f==null?void 0:f.map(r=>r.id)),enabled:!!f});function T({quizId:r}){return r}function G({assessmentId:r}){return r}const K=p.useMemo(()=>{var r,u,k,W;if(console.log(i),i.length&&g){const w=d==null?void 0:d.find(s=>s.id===g);console.log(m),console.log(i);const o=m==null?void 0:m.find(s=>(s==null?void 0:s.id)===i);return(r=o==null?void 0:o.answers)!=null&&r.length?(u=w==null?void 0:w.questions)==null?void 0:u.map((s,c)=>s.type==="dropdowns"?e.jsx(M,{selectQuestions:l,index:c,question:s,answer:o==null?void 0:o.answers[c]},c):e.jsx(v,{selectQuestions:l,index:c,question:s,answer:o==null?void 0:o.answers[c]},c)):void 0}else if(i.length&&a){const w=f==null?void 0:f.find(s=>s.id===a),o=F==null?void 0:F.find(s=>(s==null?void 0:s.id)===i);return(k=o==null?void 0:o.answers)!=null&&k.length?(W=w==null?void 0:w.questions)==null?void 0:W.map((s,c)=>s.type==="dropdowns"?e.jsx(M,{selectQuestions:l,index:c,question:s,answer:o==null?void 0:o.answers[c]},c):e.jsx(v,{selectQuestions:l,index:c,question:s,answer:o==null?void 0:o.answers[c]},c)):void 0}},[m,i,l,f,F,g,a,d]),Y=m?Object.groupBy(m,T):{},X=F?Object.groupBy(F,G):{},H=Object.values(Y).map((r,u)=>e.jsx(de,{index:u,questions:i,setQuestions:h,setSelectedQuiz:I,quizzesArray:r},u)),N=Object.values(X).map((r,u)=>e.jsx(ce,{index:u,questions:i,setQuestions:h,setSelectedAssessment:C,assessmentsArray:r},u));return S||O||z||P?e.jsx(q,{}):e.jsxs(e.Fragment,{children:[e.jsxs(L,{display:"flex",gap:4,flexWrap:"wrap",justifyContent:"space-between",children:[H,N]}),e.jsx(L,{flex:1,display:"flex",flexDirection:"column",gap:2,mt:6,width:"auto",children:i&&e.jsxs(e.Fragment,{children:[e.jsx(x,{flex:1,alignItems:"flex-end",justifyContent:"center",children:e.jsxs(ee,{sx:{width:"200px !important",height:"45px !important",boxShadow:"0px 0px 0px 1px rgba(34,110,159,0.39)",borderRadius:"5px !important",outline:"none !important",boxSizing:"border-box !important",background:"#D0EBFC",paddingX:1,paddingY:.5,"&:hover":{boxShadow:"0px 0px 0px 1px rgba(34,110,159,0.39)",background:"#D0EBFC"},fontSize:14,fontWeight:500,fontFamily:"Inter",color:"#000",textAlign:"left",textIndent:"5px"},IconComponent:()=>e.jsx(ne,{sx:{borderLeft:"1px solid rgba(0, 0, 0, 0.2)",paddingLeft:1,height:"100%",zIndex:1,position:"absolute",left:"80%"}}),inputProps:{style:{borderRight:"1px solid rgba(0, 0, 0, 1)",width:"100%"}},variant:"standard",disableUnderline:!0,value:l,onChange:r=>j(r.target.value),children:[e.jsx(R,{value:"All Questions",children:"All Questions"}),e.jsx(R,{value:"Correct Questions",children:"Correct Questions"}),e.jsx(R,{value:"Wrong Questions",children:"Wrong Questions"})]})}),K,e.jsx("div",{ref:y})]})})]})}export{ue as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ExpandMore-uAOPnDwe.js","assets/index-BLDXZsNf.js","assets/index-sAHsY2w0.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
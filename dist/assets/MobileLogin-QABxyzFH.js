import{U as m,D as p,V as U,W as z,X as v,r as n,j as e,B as g,k as x,aE as X,T as K,aB as R,aF as o,aA as c,aG as Q,S as Z,a5 as _,M as d,a as ee,aH as te,C as ne,aI as re,a1 as se,aJ as ae}from"./index-BLDXZsNf.js";const oe=async r=>{const u=m(p,"users"),s=U(u,z("number","==",r)),a=await v(s);return a.docs.length>0?a.docs[0]:null},ie=async r=>{const u=m(p,"users"),s=U(u,z("userId","==",r)),a=await v(s);return a.docs.length>0?a.docs[0]:null};function de(){const[r,u]=n.useState("+20"),[s,a]=n.useState(""),[f,w]=n.useState(""),[i,I]=n.useState(""),[l,D]=n.useState("Occupation"),[E,F]=n.useState(""),[h,P]=n.useState(""),[b,A]=n.useState(""),[C,W]=n.useState(!1),[q,B]=n.useState(!1),[M,L]=n.useState(!1),[O,y]=n.useState(""),[j,k]=n.useState(!1),N=async t=>{t.preventDefault(),q?await oe(r)?y("Mobile Number Already In Use!"):await ie(i)?y("Email is Already In Use!"):(te(ae,i,h).then(async S=>{const V=S.user.uid,Y=ne(p,"students",V),$=m(p,"teachers"),G=await v($);await re(Y,{favoritePrograms:[],friends:[...G.docs.map(J=>J.id)],name:`${s} ${f}`,email:i,number:r,image:"",occupation:l!=="other"?l:E,Country:"Egypt"});const H=m(p,"users");await se(H,{userId:i,role:"student",number:r}),k(!0)}).catch(S=>console.error(S)),I(""),P(""),A(""),a(""),w(""),u("")):y("Please Enter All Details!")};function T(t){t==="+20 0"&&r==="+20"||u(t)}return n.useEffect(()=>{W(h===b)},[h,b]),n.useEffect(()=>{B([C,i,s,f,r,l,l!=="Occupation"].every(Boolean))},[C,i,s,f,r,l]),e.jsxs(g,{height:"100vh",justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column",children:[e.jsxs(x,{mt:6,children:[e.jsx(g,{position:"absolute",top:"1%",left:"1%",children:e.jsx("img",{src:X,width:"79px",height:"70px"})}),e.jsx(K,{fontWeight:700,fontSize:24,fontFamily:"Inter",children:"Student Sign Up"})]}),O&&!j&&e.jsx(x,{mb:1,mt:1,textAlign:"center",children:e.jsx(R,{severity:"error",children:O})}),j&&e.jsx(x,{mb:1,mt:1,textAlign:"center",children:e.jsx(R,{severity:"success",children:"Signed Up Successfully! You can now log in on the website"})}),!j&&e.jsx(x,{width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center",children:e.jsxs("form",{style:{padding:"24px",display:"flex",flexDirection:"column",gap:"30px",flex:1,marginBottom:"auto",marginTop:"auto"},onSubmit:N,children:[e.jsxs(x,{direction:"row",gap:4,children:[e.jsx(o,{sx:{flex:1},children:e.jsx(c,{fullWidth:!0,required:!0,color:"info",variant:"outlined",placeholder:"First Name",value:s,onChange:t=>a(t.target.value),inputProps:{style:{textAlign:"left",fontSize:18,textIndent:"10px",borderRadius:"5px"}}})}),e.jsx(o,{sx:{flex:1},children:e.jsx(c,{fullWidth:!0,required:!0,color:"info",variant:"outlined",placeholder:"Last Name",value:f,onChange:t=>w(t.target.value),inputProps:{style:{textAlign:"left",fontSize:18,textIndent:"10px",borderRadius:"5px"}}})})]}),e.jsx(o,{sx:{flex:1},children:e.jsx(c,{fullWidth:!0,required:!0,color:"info",variant:"outlined",placeholder:"Email",type:"email",value:i,onChange:t=>I(t.target.value),inputProps:{style:{textAlign:"left",textIndent:"10px",fontSize:18,borderRadius:"5px"}}})}),e.jsx(o,{children:e.jsx(Q,{value:r,onChange:T,placeholder:"Phone Number",inputProps:{style:{textAlign:"left",textIndent:"37px",fontSize:18,borderLeft:"1px solid rgba(0, 0, 0, 0.1)",borderTopLeftRadius:"0px",borderBottomLeftRadius:"0px",borderRadius:"5px"}}})}),e.jsx(o,{children:e.jsx(g,{sx:{cursor:"pointer"},onClick:()=>L(t=>!t),children:e.jsxs(Z,{sx:{width:"100% !important",flex:1,boxShadow:"0px 0px 0px 0px rgba(0, 0, 0, 0.20)",borderRadius:"4px !important",outline:"none !important",boxSizing:"border-box !important",background:"transparent","&:hover":{boxShadow:"0px 0px 0px 1px rgba(0, 0, 0, 0.20)",background:"transparent"},textAlign:"left",pl:"10px",fontSize:18},IconComponent:()=>e.jsx(_,{sx:{cursor:"pointer",borderLeft:"1.5px solid rgba(0, 0, 0, 0.20)",color:"#000",paddingLeft:1,height:"100%",zIndex:1,position:"absolute",left:"86%"}}),inputProps:{style:{borderRight:"1px solid rgba(0, 0, 0, 1)",width:"100%"}},disableUnderline:!0,color:"primary",defaultValue:"Occupation",open:M,value:l,onChange:t=>D(t.target.value),children:[e.jsx(d,{value:"Occupation",disabled:!0,children:"Occupation"}),e.jsx(d,{value:"Software Engineer",children:"Software Engineer"}),e.jsx(d,{value:"Project Manager",children:"Project Manager"}),e.jsx(d,{value:"Mechanical Engineer",children:"Mechanical Engineer"}),e.jsx(d,{value:"Student",children:"Student"}),e.jsx(d,{value:"Other",children:"Other"})]})})}),l==="Other"&&e.jsx(o,{sx:{flex:1},children:e.jsx(c,{fullWidth:!0,required:!0,name:"otherOccupation",color:"info",variant:"outlined",placeholder:"Other Occupation",value:E,onChange:t=>F(t.target.value),inputProps:{style:{textAlign:"left",textIndent:"10px",fontSize:18,borderRadius:"5px"}}})}),e.jsx(o,{sx:{flex:1},children:e.jsx(c,{fullWidth:!0,required:!0,color:"info",variant:"outlined",placeholder:"Password",type:"password",value:h,onChange:t=>P(t.target.value),inputProps:{style:{textAlign:"left",textIndent:"10px",fontSize:18,borderRadius:"5px"}}})}),e.jsx(o,{sx:{flex:1},children:e.jsx(c,{fullWidth:!0,required:!0,color:"info",variant:"outlined",placeholder:"Confirm Password",type:"password",value:b,onChange:t=>A(t.target.value),inputProps:{style:{textAlign:"left",textIndent:"10px",fontSize:18,borderRadius:"5px"}}})}),e.jsx(g,{flex:1,display:"flex",flexDirection:"column",children:e.jsx(ee,{sx:{flex:1,background:"#226E9F",color:"#fff",fontFamily:"Inter",fontSize:18,textTransform:"none",fontWeight:500,border:"1px solid #226E9F",borderRadius:"6px","&:hover":{background:"#226E9F",opacity:1},paddingY:1.5},type:"submit",children:"Sign Up"})})]})})]})}export{de as default};

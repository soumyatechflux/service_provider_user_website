import{U as L,D as p,V as m,a8 as z,W as F,X as D,af as E,l as W,n as _,r as y,A as k,f as h,o as O,j as t,T as s,B as a,$ as N,aa as X,k as r,P as R,a6 as Z,a as v,C as $,Q as H,Y as V,p as U,_ as Y}from"./index-BLDXZsNf.js";import{g as J,a as G,b as ee}from"./getQuizzesData-LrFtBJND.js";import{g as te}from"./getCoursesData-bKJQ8hIk.js";import{g as ne}from"./getStudentCount-DmUkYYEn.js";import{g as ie}from"./getTeacherDataFromProgram-st-c01_H.js";import{l as se}from"./stripe.esm-5XFWplrb.js";const oe=async(e,d)=>{const c=L(p,"studentProgram"),n=L(p,"studentRequestProgram"),C=m(c,z(F("studentId","==",e),F("programId","==",d.id))),j=m(n,z(F("studentId","==",e),F("programId","==",d.id))),o=await D(C),i=await D(j);o.docs.length&&await E(o.docs[0].ref),i.docs.length&&await E(i.docs[0].ref)};function de(e){const d=W(),c=_(),{userData:n}=y.useContext(k),[C,j]=y.useState(!1),{data:o}=h({queryKey:["preReqData",(e==null?void 0:e.id)??""],queryFn:()=>getProgramsData(e==null?void 0:e.prerequisites),refetchOnMount:!1,enabled:!!e.prerequisites}),{data:i}=h({queryKey:["teacherData",e.id],queryFn:()=>ie(e),refetchOnMount:!1}),{data:B}=h({queryKey:["studentCount",(e==null?void 0:e.id)??""],queryFn:()=>ne(e==null?void 0:e.id),refetchOnMount:!0}),{data:u}=h({queryKey:["courses",(e==null?void 0:e.id)??""],queryFn:()=>te(e),refetchOnMount:!0,enabled:!!e.id}),{data:b}=h({queryKey:["assessments",(e==null?void 0:e.id)??""],queryFn:()=>J(u),enabled:!!u,refetchOnMount:!0}),{data:I}=h({queryKey:["lessons",(e==null?void 0:e.id)??""],queryFn:()=>G(u._id,u.programId),enabled:!!u,refetchOnMount:!0}),{data:S}=h({queryKey:["quizzes",(e==null?void 0:e.id)??""],queryFn:()=>ee(u),enabled:!!u,refetchOnMount:!0}),{data:l}=h({queryKey:["studentProgram",(e==null?void 0:e.id)??"",n.id],queryFn:async()=>{const x=L(p,"studentProgram"),f=m(x,z(F("studentId","==",n.id),F("programId","==",e.id))),g=await D(f);return g.docs.length>0?{...g.docs[0].data(),id:g.docs[0].id}:null},enabled:!!e.id}),P=((u==null?void 0:u.length)??[].length)+((b==null?void 0:b.length)??[].length)+((I==null?void 0:I.length)??[].length)+((S==null?void 0:S.length)??[].length),{mutate:A}=O({onMutate:()=>{const x=d.getQueryData(["currentPrograms",n==null?void 0:n.id]);return d.setQueryData(["currentPrograms",n==null?void 0:n.id],f=>{const g=f?f.slice().filter(q=>q.id!==e.id):[];return g?[...g,{...e,expired:!1}]:[{...e,expired:!1}]}),()=>d.setQueryData(["currentPrograms",n==null?void 0:n.id],x)},mutationFn:()=>M()}),M=async()=>{j(!0),await oe(n==null?void 0:n.id,e),await T(),d.invalidateQueries({queryKey:["studentRequest",e==null?void 0:e.id]}),d.invalidateQueries({queryKey:["currentPrograms",n==null?void 0:n.id]}),d.invalidateQueries({queryKey:["explorePrograms",n==null?void 0:n.id]})},T=async()=>{const x=await se("pk_test_51Nsfx3HcZNrTj14uD0I7IAgxoJoEgu3Uo43W5wjCAtoNw0c7Qhl0VNxRDRhat0XIjA1hellXid9tsm8HmYZ4oQzn00lw1w7DLT"),f={"Content-Type":"application/json"},q={program:{...e,image:""},studentId:n.id},K=(await V.post("https://engmestripeapi.vercel.app/create-checkout-session",q,{headers:f})).data,w=await(x==null?void 0:x.redirectToCheckout({sessionId:K.id}));w!=null&&w.error&&console.error(w.error)},Q=o==null?void 0:o.map(x=>t.jsx(s,{sx:{textDecoration:"underline",cursor:"pointer"},fontSize:18,fontFamily:"Inter",fontWeight:400,children:x.name}));return t.jsxs(a,{display:"flex",flexDirection:"column",borderRadius:"20px",height:"auto",overflow:"hidden",children:[t.jsx(N,{open:C,PaperProps:{style:{background:"transparent",backgroundColor:"transparent",overflow:"hidden",boxShadow:"none"}},children:t.jsx(X,{size:"46px",sx:{color:"#FF7E00"}})}),t.jsxs(a,{p:3,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",bgcolor:"#F8F8F8",flex:1,children:[t.jsx(r,{width:{xs:"40%",sm:"40%",lg:"35%"},direction:"row",children:t.jsxs(r,{direction:"column",gap:2,bgcolor:"#F8F8F8",flex:1,children:[t.jsxs(r,{alignItems:"center",justifyContent:"space-between",direction:"row",children:[t.jsx(s,{fontSize:26,fontWeight:900,fontFamily:"Inter",children:e==null?void 0:e.name}),t.jsx(R,{sx:{fontSize:24},children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",children:t.jsx("path",{d:"M6.14963 19.1713C4.44636 20.0668 2.90407 18.9476 3.22957 17.0498L3.99423 12.5915L0.755079 9.43408C-0.622893 8.09089 -0.0350361 6.27823 1.87044 6.00135L6.34684 5.35089L8.34874 1.2946C9.20037 -0.431002 11.106 -0.432061 11.9581 1.2946L13.96 5.35089L18.4364 6.00135C20.3407 6.27806 20.9306 8.09007 19.5518 9.43408L16.3126 12.5915L17.0773 17.0498C17.4026 18.9464 15.8616 20.0673 14.1572 19.1713L10.1534 17.0664L6.14963 19.1713ZM9.22844 15.0107C9.77849 14.7215 10.5263 14.7204 11.0784 15.0107L14.7783 16.9559L14.0717 12.836C13.9667 12.2235 14.1967 11.5119 14.6434 11.0765L17.6367 8.15877L13.5001 7.55768C12.8851 7.46832 12.2795 7.02965 12.0034 6.47029L10.1534 2.72187L8.30348 6.47029C8.02846 7.02755 7.4241 7.46799 6.80681 7.55768L2.67018 8.15877L5.66347 11.0765C6.10847 11.5103 6.3406 12.2211 6.23515 12.836L5.52853 16.9559L9.22844 15.0107Z",fill:"#FF7E00"})})})]}),t.jsxs(r,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[t.jsx(s,{fontSize:16,fontWeight:400,fontFamily:"Inter",children:"Nanodegree Program"}),t.jsxs(r,{direction:"row",gap:1,alignItems:"center",justifyContent:"center",children:[t.jsx(R,{sx:{fontSize:20},children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15",viewBox:"0 0 16 15",fill:"none",children:t.jsx("path",{d:"M7.72751 0.779696C7.89978 0.258006 8.63774 0.258004 8.81001 0.779694L10.2205 5.05112C10.2976 5.28465 10.5158 5.44239 10.7618 5.44239H15.3064C15.8608 5.44239 16.0889 6.15367 15.6379 6.47609L11.9772 9.09309C11.7741 9.23822 11.6891 9.49854 11.7674 9.73552L13.1694 13.9812C13.3423 14.5047 12.7452 14.9443 12.2967 14.6236L8.60025 11.9811C8.40198 11.8394 8.13554 11.8394 7.93727 11.9811L4.24085 14.6236C3.79234 14.9443 3.19523 14.5047 3.36811 13.9812L4.77012 9.73552C4.84837 9.49854 4.76337 9.23822 4.56036 9.09309L0.899615 6.47609C0.448606 6.15367 0.676701 5.44239 1.2311 5.44239H5.77575C6.02168 5.44239 6.23988 5.28465 6.317 5.05112L7.72751 0.779696Z",fill:"#FF9F06"})})}),t.jsx(s,{fontSize:16,fontFamily:"Poppins",fontWeight:700,sx:{color:"#004643"},children:e.averageRating}),t.jsxs(s,{fontFamily:"Inter",fontSize:16,fontWeight:400,children:["(",e.totalFeedbacks,")"]})]})]})]})}),t.jsx(r,{width:{xs:"40%",sm:"40%",lg:"30%"},children:t.jsx(s,{fontSize:18,fontWeight:400,fontFamily:"Inter",children:e.description})})]}),t.jsxs(a,{children:[t.jsxs(r,{flexWrap:"wrap",gap:{xs:2,sm:2,lg:6},direction:"row",pl:9,pb:2,pt:4,bgcolor:"#F8F8F8",children:[t.jsx(s,{fontSize:18,fontFamily:"Inter",fontWeight:600,children:"Prerequisites:"}),Q]}),t.jsxs(a,{px:6,pl:10,bgcolor:"#E8E8E8",py:4,children:[t.jsx(s,{fontSize:18,fontFamily:"Inter",fontWeight:600,children:"Taught By:"}),t.jsxs(r,{ml:2,direction:"row",justifyContent:"space-between",children:[t.jsxs(r,{direction:"row",gap:2,mt:4,alignItems:"center",children:[t.jsx(Z,{onClick:()=>c(`/teacherprofile/${i==null?void 0:i.id}`),src:i==null?void 0:i.image,sx:{width:"70px",height:"70px",cursor:"pointer"}}),t.jsxs(r,{direction:"column",justifyContent:"center",gap:.5,children:[t.jsxs(s,{onClick:()=>c(`/teacherprofile/${i==null?void 0:i.id}`),sx:{color:"#000",cursor:"pointer"},fontFamily:"Inter",fontSize:12,fontWeight:600,children:[i==null?void 0:i.name," | ",i==null?void 0:i.title]}),t.jsxs(r,{direction:"row",justifyContent:"space-between",gap:1,children:[t.jsx(s,{fontFamily:"Inter",fontSize:12,fontWeight:500,children:i==null?void 0:i.university}),t.jsx(r,{direction:"row",alignItems:"center",gap:.5})]})]})]}),t.jsx(r,{direction:"column",mr:12,children:t.jsxs(r,{direction:"row",gap:6,children:[t.jsxs(a,{display:"flex",flexDirection:"column",bgcolor:"#D0EBFC",alignItems:"center",justifyContent:"center",textAlign:"center",width:"68px",border:"1px solid #226E9F",borderRadius:"10px",height:"60px",children:[t.jsx(s,{fontWeight:600,fontFamily:"Inter",fontSize:20,children:Object.keys((e==null?void 0:e.finalExams)??[]).length}),t.jsx(s,{fontSize:9,fontWeight:500,fontFamily:"Inter",children:"Model Exam(s)"})]}),t.jsxs(a,{display:"flex",flexDirection:"column",bgcolor:"#D0EBFC",alignItems:"center",justifyContent:"center",textAlign:"center",width:"68px",border:"1px solid #226E9F",borderRadius:"10px",height:"60px",children:[t.jsx(s,{fontWeight:600,fontFamily:"Inter",fontSize:20,children:B}),t.jsx(s,{fontSize:9,fontWeight:500,fontFamily:"Inter",children:"Student(s)"})]}),t.jsxs(a,{display:"flex",flexDirection:"column",bgcolor:"#D0EBFC",alignItems:"center",justifyContent:"center",textAlign:"center",width:"68px",border:"1px solid #226E9F",borderRadius:"10px",height:"60px",children:[t.jsx(s,{fontWeight:600,fontFamily:"Inter",fontSize:20,children:P>1?`${P-1}+`:P}),t.jsx(s,{fontSize:9,fontWeight:500,fontFamily:"Inter",children:"Material(s)"})]})]})})]}),t.jsxs(r,{mt:7,ml:-6,justifyContent:"space-between",direction:"row",children:[t.jsxs(r,{direction:"row",gap:1,flexWrap:"wrap",height:"fit-content",children:[t.jsx(a,{bgcolor:"#D0EBFC",sx:{border:"1.5px solid",borderRadius:"20px",borderColor:"#6A9DBC"},px:1.5,py:.5,children:t.jsx(s,{fontSize:12,fontWeight:400,fontFamily:"Inter",children:e==null?void 0:e.duration})}),t.jsx(a,{bgcolor:"#D0EBFC",sx:{border:"1.5px solid",borderRadius:"20px",borderColor:"#6A9DBC"},px:1.5,py:.5,children:t.jsx(s,{fontSize:12,fontWeight:400,fontFamily:"Inter",children:"Completion Certificate"})}),t.jsx(a,{bgcolor:"#D0EBFC",sx:{border:"1.5px solid",borderRadius:"20px",borderColor:"#6A9DBC"},px:1.5,py:.5,children:t.jsx(s,{fontSize:12,fontWeight:400,fontFamily:"Inter",children:e==null?void 0:e.level})}),t.jsx(a,{bgcolor:"#D0EBFC",sx:{border:"1.5px solid",borderRadius:"20px",borderColor:"#6A9DBC"},px:1.5,py:.5,children:t.jsx(s,{fontSize:12,fontWeight:400,fontFamily:"Inter",children:e==null?void 0:e.expiry})})]}),l!=null&&l.extended?t.jsx(v,{sx:{marginLeft:"auto",marginRight:11,marginTop:-4,width:"320px",height:"50px",background:"#fff",color:"#226E9F",fontFamily:"Inter",fontSize:14,textTransform:"none",fontWeight:700,border:"1px solid #226E9F",borderRadius:"15px","&:hover":{background:"#fff",opacity:1},paddingX:6},onClick:()=>A(),children:"This program expired. Repurchase to complete"}):t.jsx(v,{sx:{marginLeft:"auto",marginRight:11,marginTop:-4,width:"320px",height:"50px",background:"#fff",color:"#226E9F",fontFamily:"Inter",fontSize:14,textTransform:"none",fontWeight:700,border:"1px solid #226E9F",borderRadius:"15px","&:hover":{background:"#fff",opacity:1},paddingX:6},onClick:async()=>{if((l==null?void 0:l.id)!==null&&typeof(l==null?void 0:l.id)=="string"){j(!0);const x=$(p,"studentProgram",l==null?void 0:l.id),f=l.endDate.toDate();f.setDate(f.getDate()+90),await H(x,{extended:!0,endDate:f}),window.location.reload(),c(`/programs/current/${e.id}`),j(!1)}},children:"Extend 90 Days For Free!"})]})]})]})]})}const re=y.lazy(()=>Y(()=>import("./ProgramCurrentCard-6Z16ht3D.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])));function ye(){const e=W(),d=y.useRef(null),{id:c}=U(),{userData:n}=y.useContext(k),C=e.getQueryData(["currentPrograms",n==null?void 0:n.id])||[],j=C?C.map(o=>o.expired?t.jsx(y.Suspense,{children:t.jsx("div",{ref:c&&o.id===c?d:null,children:t.jsx(de,{...o})})},o.id):t.jsx(y.Suspense,{children:t.jsx("div",{ref:c&&o.id===c?d:null,children:t.jsx(re,{program:o})})},o.id)):t.jsx("p",{children:"Loading programs..."});return y.useEffect(()=>{var o;c&&((o=d==null?void 0:d.current)==null||o.scrollIntoView({behavior:"smooth"}))},[d,c]),t.jsx(a,{px:4,py:4,display:"flex",flex:1,alignItems:"stretch",flexDirection:"column",gap:6,children:j})}export{ye as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/ProgramCurrentCard-6Z16ht3D.js","assets/index-BLDXZsNf.js","assets/index-sAHsY2w0.css","assets/getStudentLessons-9oxf_aXv.js","assets/index-_pDSIHrO.js","assets/getTeacherDataFromProgram-st-c01_H.js","assets/setStudentProgramFavorite-WRttFheY.js","assets/getQuizzesData-LrFtBJND.js","assets/getCoursesData-bKJQ8hIk.js","assets/getProgramFinalExams-5NZ9maXk.js","assets/getStudentProgramFinalExams-vPSFFfCN.js","assets/getStudentProgramComment-6TgU_WlX.js","assets/setStudentProgramComment-_VEOSJGc.js","assets/AccordionSummary-zqxAlL-z.js","assets/StarRate-oODS2RVk.js","assets/StarOutline-9Bdg8jvp.js","assets/Snackbar-qwGm_4Bu.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}